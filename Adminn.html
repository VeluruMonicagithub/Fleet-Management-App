<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <style>
        body{
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
            
        }
        .navbar{
            background-color: rgb(216, 216, 153);
            color: black;
            padding:10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .app-container{
            display: flex;;
        }
        .sidebar{
            width:300px;
            height:700px;
            padding: 10px;
            background-color: rgb(142, 206, 206);

        }
        .main-content{
            flex-grow: 1;
            padding: 20px;
        }
        .fleet-cards{
            display: grid;
            grid-template-columns: repeat(4,1fr);
            gap: 20px;
        }
        .card{
            background: white;
            padding:15px;
            border-radius: 5px;

        }
        .card button{
            margin-top: 10px;
            margin-right: 5px;
            padding: 8px;
        }
        fleet-form input, .fleet-form select, .fleet-form button{
            width: 100%;
            margin: 10px 0;
            padding: 10px;
        }
        .category-select{
            margin-right: 10px;
        }
    </style>
</head>
<body>

    <div class="navbar">
        <h1>Admin Dashboardd</h1>
        <div>
            <label for="categoryFilter">
                category:
            </label>
            <select id="categoryFilter" onchange="applyFilters()">
                <option value="ALL">All</option>
                <option value="Auto">Auto</option>
                <option value="Car">Car</option>
                <option value="Truck">Truck</option>
                <option value="Bus">Bus</option>
            </select>
            <label for="AvailabilityFilter">Availability:</label>
            <select id="AvailabilityFilter" onchange="applyFilters()">
                <option value="ALL">All</option>
                <option value="Available">Available</option>
                <option value="Unavailable">Unavailable</option>
            </select>
            <button onclick="clearFilters()">Clear Filters</button>
    </div>  
    </div>

    <div class="app-container">
        <div class="sidebar">
            <h2>Add New</h2>
            <form class="fleet-form" id="addFleetForm">
                <input type="text" id="regNo" placeholder="Reg No of Vehicle" required>

                <select id="category" required>
                    <option value="" disabled selected>Select Category</option>
                    <option value="Auto">Auto</option>
                    <option value="Car">Car</option>
                    <option value="Truck">Truck</option>
                    <option value="Bus">Bus</option>
                </select>
                <input type="text" id="driverName" placeholder="driverName" required>
                <select id="isAvailable" required>
                    <option value="Available">Available</option>
                    <option value="Unavailable">Unavailable</option>
                </select>
                <button type="submit">Add Vehicle</button>
            </form>
        </div>
        <div class="main-content">
            <h2>Vehicle List</h2>
            <div class="fleet-cards" id="fleetCardsContainer"></div>
        </div>
    </div>
  <script>
    let fleetData = [];
    function renderFleetCards(vehiclesToRender){
        const container = document.getElementById('fleetCardsContainer');
        container.innerHTML='';
        vehiclesToRender.forEach(vehicle =>{
            const card = document.createElement('div');
            card.className='card';
            card.setAttribute('data-regno',vehicle.regNo);
            card.innerHTML = `
               <h4>Reg No: ${vehicle.regNo}</h4>
               <p><strong>Category:</strong> ${vehicle.category}</p>
                <p><strong>Driver Name:</strong> ${vehicle.driverName}</p>
                <p><strong>Availability:</strong> ${vehicle.isAvailable}</p>
                <img src="https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png" alt="Vehicle Image" style="width:100%; height:150px; object-fit:cover; border-radius:5px;">
                <button onClick="updateDriver('${vehicle.regNo}')">Update Driver</button>
                <button onClick="changeAvailability('${vehicle.regNo}')">Change Availability</button>
                <button onClick="deleteVehicle('${vehicle.regNo}')">Delete Vehicle</button>
                `;
                container.appendChild(card)
        })
    }
    function updateDriver(regNo){
        const newDriverName=prompt("Enter New Driver Name:");
        if(newDriverName !== null){
            const trimmedName=newDriverName.trim();
            if(trimmedName === " "){
                alert("Driver name cannot be empty.");
                return;
            }
            const vehicle= fleetData.find(v => v.regNo === regNo);
            if(vehicle){
                vehicle.driverName=trimmedName;
        document.getElementById(`driverName-${regNo}`).innerText=trimmedName;
        alert("Driver name updated successfully.");
            }

        }
    }
    function changeAvailability(regNo){
        const vehicle=fleetData.find(v => v.regNo === regNo);
        if(vehicle){
            vehicle.isAvailable = vehicle.isAvailable === "Available" ? "Unavailable" : "Available";
            applyFilters();
            alert("Availability status changed successfully.");
        }
    }
    function deleteVehicle (regNo){
        const isConfirmed=confirm("Are you sure you want to delete this vehicle?");
        if(isConfirmed){
            fleetData=fleetData.filter(v => v.regNo !== regNo);
            applyFilters();
            alert("Vehicle deleted successfully.");
        }
    }
    document.getElementById('addFleetForm').addEventListener('submit',function(event){
        event.preventDefault();
        const regNo=document.getElementById('regNo').value.trim();
        const category=document.getElementById('category').value;
        const driverName=document.getElementById('driverName').value.trim();
        const isAvailable=document.getElementById('isAvailable').value;
        if(fleetData.some(v => v.regNo === regNo)){
            alert("A vehicle with this registration number already exists.");
            return;
        }
        const newVehicle={
            regNo,
            category,
            driverName,
            isAvailable
        };
        fleetData.push(newVehicle);
        applyFilters();
        document.getElementById('addFleetForm').reset();
        alert("New vehicle added successfully.");
    });
    function applyFilters(){
        const categoryFilter=document.getElementById('categoryFilter').value;
        const availabilityFilter=document.getElementById('AvailabilityFilter').value;
        let filteredData=fleetData;
        if(categoryFilter !== "ALL"){
            filteredData=filteredData.filter(v => v.category === categoryFilter);
        }
        if(availabilityFilter !== "ALL"){
            filteredData=filteredData.filter(v => v.isAvailable === availabilityFilter);
        }
        renderFleetCards(filteredData);
    }
    function clearFilters(){
        document.getElementById('categoryFilter').value='ALL';
        document.getElementById('AvailabilityFilter').value='ALL';
        renderFleetCards(fleetData);
    }
    
  </script>

</body>
</html>