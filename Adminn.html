<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
</head>
<body>
    <div class="navbar">
        <h1>Admin Dashboard</h1>
        <div>
            <label for="categoryFilter">
                category:
            </label>
            <select id="categoryFilter" onchange="applyFilters()">
                <option value="ALL">All</option>
                <option value="Auto">Auto</option>
                <option value="Car">Car</option>
                <option value="Truck">Truck</option>
                <option value="Bus">Bus</option>
            </select>
            <label for="AvailabilityFilter">Availability:</label>
            <select id="AvailabilityFilter" onchange="applyFilters()">
                <option value="ALL">All</option>
                <option value="Available">Available</option>
                <option value="Unavailable">Unavailable</option>
            </select>
            <button onclick="clearFilters()">Clear Filters</button>
    </div>  
    </div>

    <div class="app-container">
        <div class="sidebar">
            <h2>Add New</h2>
            <form class="fleet-form" id="addFleetForm">
                <input type="text" id="regNo" placeholder="Reg No of Vehicle" required>

                <select id="category" required>
                    <option value="" disabled selected>Select Category</option>
                    <option value="Auto">Auto</option>
                    <option value="Car">Car</option>
                    <option value="Truck">Truck</option>
                    <option value="Bus">Bus</option>
                </select>
                <input type="text" id="driverName" placeholder="driverName" required>
                <select id="isAvailable" required>
                    <option value="Available">Available</option>
                    <option value="Unavailable">Unavailable</option>
                </select>
                <button type="submit">Add Vehicle</button>
            </form>
        </div>
        <div class="main-content">
            <h2>Vehicle List</h2>
            <div class="fleet-cards" id="fleetCardsContainer"></div>
        </div>
    </div>
  <script>
    let fleetData = [];
    function renderFleetCards(vehiclesToRender){
        const container = document.getElementById('fleetCardsContainer');
        container.innerHTML='';
        vehiclesToRender.forEach(vehicle =>{
            const card = document.createElement('div');
            card.className='fleet-card';
            card.setAttribute('data-regno',vehicle.regNo);
            card.innerHTML = `
               <h4>Reg No: ${vehicle.regNo}</h4>
               <p><strong>Category:</strong> ${vehicle.category}</p>
                <p><strong>Driver Name:</strong> ${vehicle.driverName}</p>
                <p><strong>Availability:</strong> ${vehicle.isAvailable}</p>
                <img src="https://coding-platform.s3.amazonaws.com/dev/lms/tickets/5e80fcb6-3f8e-480c-945b-30a5359eb40e/JNmYjkVr3WOjsrbu.png" alt="Vehicle Image" width="200">
                <button onClick="updateDriver('${vehicle.regNo}')">Update Driver</button>
                <button onClick="changeAvailability('${vehicle.regNo}')">Change Availability</button>
                <button onClick="deleteVehicle('${vehicle.regNo}')">Delete Vehicle</button>
                `;
        })
    }
    function updateDriver(regNo){
        const newDriverName=prompt("Enter New Driver Name:");
        if(newDriverName !== null){
            const trimmedName=newDriverName.trim();
            if(trimmedName === " "){
                alert("Driver name cannot be empty.");
                return;
            }
            const vehicle= fleetData.find(v => v.regNo === regNo);
            if(vehicle){
                vehicle.driverName=trimmedName;
        document.getElementById(`driverName-${regNo}`).innerText=trimmedName;
        alert("Driver name updated successfully.");
            }

        }
    }
    
  </script>

</body>
</html>